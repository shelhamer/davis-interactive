



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.3">
    
    
      
        <title>Usage - DAVIS Interactive Evaluation Framework</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.8d40d89b.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#usage" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="DAVIS Interactive Evaluation Framework" class="md-header-nav__button md-logo">
          
            <i class="md-icon">laptop</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                DAVIS Interactive Evaluation Framework
              </span>
              <span class="md-header-nav__topic">
                Usage
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/albertomontesg/davis-interactive" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      albertomontesg/davis-interactive
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon">laptop</i>
      
    </span>
    DAVIS Interactive Evaluation Framework
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/albertomontesg/davis-interactive" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      albertomontesg/davis-interactive
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../challenge/" title="Challenge" class="md-nav__link">
      Challenge
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Usage
      </label>
    
    <a href="./" title="Usage" class="md-nav__link md-nav__link--active">
      Usage
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#session" title="Session" class="md-nav__link">
    Session
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#control-flow" title="Control Flow" class="md-nav__link">
    Control Flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#obtain-scribbles" title="Obtain Scribbles" class="md-nav__link">
    Obtain Scribbles
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scribbles-transformations" title="Scribbles Transformations" class="md-nav__link">
    Scribbles Transformations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prediction-submission" title="Prediction Submission" class="md-nav__link">
    Prediction Submission
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-result" title="Final Result" class="md-nav__link">
    Final Result
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scribbles/" title="Scribbles Format" class="md-nav__link">
      Scribbles Format
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Interactive Session
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Interactive Session
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docs/session/" title="session" class="md-nav__link">
      session
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Dataset
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Dataset
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docs/dataset.davis/" title="dataset.davis" class="md-nav__link">
      dataset.davis
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Evaluation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Evaluation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docs/evaluation.service/" title="evaluation.service" class="md-nav__link">
      evaluation.service
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      Robot
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Robot
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docs/robot/" title="robot.interactive_robot" class="md-nav__link">
      robot.interactive_robot
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Metrics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Metrics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docs/metrics.jaccard/" title="metrics.jaccard" class="md-nav__link">
      metrics.jaccard
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      Utils
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        Utils
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docs/utils.operations/" title="utils.operations" class="md-nav__link">
      utils.operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docs/utils.scribbles/" title="utils.scribbles" class="md-nav__link">
      utils.scribbles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docs/utils.mask/" title="utils.mask" class="md-nav__link">
      utils.mask
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docs/utils.visualization/" title="utils.visualization" class="md-nav__link">
      utils.visualization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-7" type="checkbox" id="nav-4-7">
    
    <label class="md-nav__link" for="nav-4-7">
      Third Party
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-7">
        Third Party
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docs/third_party/mask_api/" title="third_party.mask_api" class="md-nav__link">
      third_party.mask_api
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#session" title="Session" class="md-nav__link">
    Session
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#control-flow" title="Control Flow" class="md-nav__link">
    Control Flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#obtain-scribbles" title="Obtain Scribbles" class="md-nav__link">
    Obtain Scribbles
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scribbles-transformations" title="Scribbles Transformations" class="md-nav__link">
    Scribbles Transformations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prediction-submission" title="Prediction Submission" class="md-nav__link">
    Prediction Submission
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-result" title="Final Result" class="md-nav__link">
    Final Result
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/albertomontesg/davis-interactive#/user_guide/usage.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h1>
<p>The simplest usage can be as follows:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">davisinteractive.session</span> <span class="kn">import</span> <span class="n">DavisInteractiveSession</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">SegmentationModel</span><span class="p">()</span> <span class="c1"># Your segmentation model</span>

<span class="k">with</span> <span class="n">DavisInteractiveSession</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">davis_root</span><span class="o">=</span><span class="s1">&#39;path/to/DAVIS&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sess</span><span class="p">:</span>
    <span class="k">while</span> <span class="n">sess</span><span class="o">.</span><span class="n">next</span><span class="p">():</span>
        <span class="c1"># Get the current iteration&#39;s scribbles</span>
        <span class="n">sequence</span><span class="p">,</span> <span class="n">scribbles</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">sess</span><span class="o">.</span><span class="n">get_scribbles</span><span class="p">()</span>
        <span class="c1"># Your model predicts the segmentation masks from the scribbles</span>
        <span class="n">pred_masks</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">scribbles</span><span class="p">)</span>
        <span class="c1"># Submit your prediction</span>
        <span class="n">sess</span><span class="o">.</span><span class="n">submit_masks</span><span class="p">(</span><span class="n">pred_masks</span><span class="p">)</span>

    <span class="c1"># Get the DataFrame report</span>
    <span class="n">report</span> <span class="o">=</span> <span class="n">sess</span><span class="o">.</span><span class="n">get_report</span><span class="p">()</span>

    <span class="c1"># Get the global summary</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">sess</span><span class="o">.</span><span class="n">get_global_summary</span><span class="p">(</span><span class="n">save_file</span><span class="o">=</span><span class="s1">&#39;summary.json&#39;</span><span class="p">)</span>
</pre></div>

<p>Let us explain every component in detail to give a better understanding about how they work. </p>
<h2 id="session">Session<a class="headerlink" href="#session" title="Permanent link">&para;</a></h2>
<p>A session is a sequence of samples (a DAVIS sequence plus an initial scribble annotated by a human).
Every sample is going to be evaluated interactively for a number of iterations (in a defined time window).
In order to be more realistic, we provide 3 manually annotated scribbles per sequence. Submitted methods will be evaluated starting from all 3 scribbles for each sequence, and the results will be averaged.</p>
<p>The first step is to create a session to evaluate:</p>
<div class="codehilite"><pre><span></span><span class="k">with</span> <span class="n">DavisInteractiveSession</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">davis_root</span><span class="o">=</span><span class="s1">&#39;path/to/davis&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sess</span><span class="p">:</span>
</pre></div>

<p>This instructs the server where to perform the evaluation (<code>localhost</code> or remote), as well as the path of the DAVIS dataset files. 
In case of development and local testing  (<code>host='localhost'</code>), 
parameters such as the maximum number of interactions per sample, the maximum interaction time per object, as well as the dataset split used, can be tuned. </p>
<p>In case of evaluation for the Challenge and remote testing (<code>host='https://server.davischallenge.org'</code>) and the <code>user_key</code> parameter should be specified to the given user key. For more information about the user key and how to register to the Challenge, please check <a href="../../challenge/#remote">Challenge Section</a>. In this case, the maximum number of interactions and the maximum interaction time will be set by the remote server so any value given to the <code>DavisInteractiveSession</code> class will be ignored.</p>
<p>For more information about the class and its possible values please check <a href="../../docs/session">DavisInteractiveSession</a>.</p>
<h2 id="control-flow">Control Flow<a class="headerlink" href="#control-flow" title="Permanent link">&para;</a></h2>
<p>In order to simplify the control flow for the user, the session provides a function to move to the following interaction/sequence:</p>
<div class="codehilite"><pre><span></span><span class="k">while</span> <span class="n">sess</span><span class="o">.</span><span class="n">next</span><span class="p">():</span>
</pre></div>

<p>Once the timeout or the maximum number of iterations is reached, this functions will move the evaluation to a new sequence or the same sequence with a different initial scribble. Otherwise, it will keep the current sequence in order to continue with more interactions.</p>
<h2 id="obtain-scribbles">Obtain Scribbles<a class="headerlink" href="#obtain-scribbles" title="Permanent link">&para;</a></h2>
<p>For every sample, there will be multiple iterations (depending on the time limit or the maximum number of iterations per sample). For every iteration you can call <code>get_scribbles</code> to obtain the scribbles for the next iteration. A tuple of three elements will be returned:</p>
<ul>
<li><code>sequence</code>: the name of the sequence in the case you are using a model that depends on the sequence of the DAVIS dataset which you are evaluating.</li>
<li><code>scribbles</code>: the scribbles of the current iteration. This scribbles by default will be all the scribbles generated for the current sample (the first human annotated and all the automatic generated at next iterations). If you call the method setting a flag <code>get_scribbles(only_last=True)</code> only the last iteration's scribbles will be returned.</li>
<li><code>new_sequence</code>: this is a flag indicating whether the given scribbles correspond to the first iteration of the sample.</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">with</span> <span class="n">DavisInteractiveSession</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">davis_root</span><span class="o">=</span><span class="s1">&#39;path/to/davis&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sess</span><span class="p">:</span>
    <span class="k">while</span> <span class="n">sess</span><span class="o">.</span><span class="n">next</span><span class="p">():</span>
        <span class="n">sequence</span><span class="p">,</span> <span class="n">scribbles</span><span class="p">,</span> <span class="n">new_sequence</span> <span class="o">=</span> <span class="n">sess</span><span class="o">.</span><span class="n">get_scribbles</span><span class="p">(</span><span class="n">only_last</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_sequence</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">load_weights</span><span class="p">(</span><span class="n">sequence</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">online_train</span><span class="p">(</span><span class="n">scribbles</span><span class="p">)</span>
        <span class="n">pred_masks</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">()</span>
        <span class="n">sess</span><span class="o">.</span><span class="n">submit_masks</span><span class="p">(</span><span class="n">pred_masks</span><span class="p">)</span>
</pre></div>

<h2 id="scribbles-transformations">Scribbles Transformations<a class="headerlink" href="#scribbles-transformations" title="Permanent link">&para;</a></h2>
<p>The scribbles are represented as the different paths of the lines over each object ID. For more information about the scribbles format, check the page <a href="../scribbles">Scribbles Format</a>.</p>
<p>This format may not be convenient for everybody, and that is why some useful transformations are included on this framework:</p>
<ul>
<li><a href="../../docs/utils.scribbles"><code>scribbles2mask</code></a>: it converts the paths of lines into a mask where the closest pixels of all the path points are set to the object ID of the line. This method also provides the possibility to apply the Bressenham's algorithm to fill in the path if two points of a line are sampled very distant on the mask.</li>
<li><a href="../../docs/utils.scribbles"><code>scribbles2points</code></a>: from the scribble, it extracts all the (x, y) coordinates of all the line points as well as its object ID.</li>
</ul>
<p>If you think there is any new transformation or a modification to the current ones that might be useful to work with scribble data, please do not hesitate to send a <a href="https://github.com/albertomontesg/davis-interactive/pulls">pull request</a>.</p>
<h2 id="prediction-submission">Prediction Submission<a class="headerlink" href="#prediction-submission" title="Permanent link">&para;</a></h2>
<p>After each iteration, it is mandatory to submit the scribbles to evaluate and at the same time to automatically generate the scribble for the next iteration.</p>
<div class="codehilite"><pre><span></span><span class="n">pred_masks</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">()</span>
<span class="n">sess</span><span class="o">.</span><span class="n">submit_masks</span><span class="p">(</span><span class="n">pred_masks</span><span class="p">)</span>
</pre></div>

<h2 id="final-result">Final Result<a class="headerlink" href="#final-result" title="Permanent link">&para;</a></h2>
<p>Once the session has finished a report can be asked using the <code>get_report</code> method. This method returns a Pandas DataFrame where every row is the evaluation of every sequence, iteration and frame; as well as the timing of every iteration. From this report, information of the performance against processing time can be extracted for comparison among interactive methods.</p>
<p>For a global summary with the values and the evaluation curve, use the <code>get_global_summary</code> method. This method returns a dictionary with all the metrics and values used to evaluate and compare models. For more information about how the evaluation works, please go to the <a href="../../challenge/#evaluation">Challenge Section</a>.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../installation/" title="Installation" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Installation
              </span>
            </div>
          </a>
        
        
          <a href="../scribbles/" title="Scribbles Format" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Scribbles Format
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 Alberto Montes
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/albertomontesg/davis-interactive" class="md-footer-social__link fa fa-github-alt"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b438e6c5.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-119121429-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>